<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>无人机位置</title>


    <link href="${s.base}/res/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <script src="${s.base}/media/js/jquery-1.10.1.min.js" type="text/javascript"></script>
    <link rel="icon" type="image/png" href="${s.base}/i/ico.png" sizes="16x16">
    <!-- BEGIN PAGE LEVEL STYLES -->
	<link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css" />
    <script src="http://cache.amap.com/lbs/static/es5.min.js"></script>
    <script type="text/javascript" src='//webapi.amap.com/maps?v=1.4.6&key=82f9e75505b649be9ab81a45ae34aa14'></script>

    <script type="text/javascript" src="${s.base}/res/js/home.js"></script>
	<script type="text/javascript" src="${s.base}/res/js/chat.js"></script>

</head>
<style>
.headerUav{
  position:absolute;
  z-index:99;
  width:400px;;
  height:50px;
  text-align:center;
  background-color:red;
  left:50%;
    top:10px;
  line-height:50px;
  transform: translate(-50%, 0);
  border-radius:10px;
  -moz-border-radius:10px; /* 老的 Firefox */
  opacity:0.6;
  color:#fff;
}
#UavInfo{
    position:absolute;
    z-index:99;
    width:330px;
    min-height: 420px;
    right:0;
    top:0;
    background-color:#fff;
    border-radius:10px;
    -moz-border-radius:10px; /* 老的 Firefox */
    opacity:0.8;
    padding: 10px;
    font-size:1.4rem;
}
span{
     color:#f01414;
 }
.liheader{
    background-color:#d4d4d4;
    font-size:1.8rem;
}
#fightStatus{
    color: #fff;
}

</style>
<body>
<input type="hidden" id="base" value="${s.base}"><br/>
<input type="hidden" id="plane" value="${uav2.deviceid!}"><br/>
<input type="hidden" id="peoplerole" value="${role!}"><br/>
<div class="headerUav" style="font-size:2.0rem;">
<font size="4">飞机状态：<span id="fightStatus">暂无</span></font>
</div>
<div id="UavInfo">
    <div class="baseInfo">
        <ul class="list-group">
            <li class="list-group-item liheader" ><b>任务基本信息</b></li>
            <li class="list-group-item" >巡检任务名称：<span id="taskName">${task.name}</span></li>
            <li class="list-group-item" >飞行路径名称：<span id="flyingPathName"></span></li>
            <li class="list-group-item">起飞员：<span>${task.userAName}</span></li>
            <li class="list-group-item">降落员：<span>${task.userZName}</span></li>
            <li class="list-group-item" >无人机设备号：<span id="uavDeviceId"></span></li>
            <li class="list-group-item" >无人机名称：<span id="uavName"></span></li>
            <li class="list-group-item" >无人机描述：<span id="uavDescription"></span></li>
        </ul>
    </div>
    <div class="flyingInfo">
        <ul class="list-group">
            <li class="list-group-item liheader"><b>无人机信息</b></li>
            <li class="list-group-item">无人机空速：<span id="fightArSpd">暂无</span><span><strong>(m/s)</strong></span></li>
            <li class="list-group-item">无人机地速：<span id="fightGrSpd">暂无</span><span><strong>(m/s)</strong></span></li>
            <li class="list-group-item">无人机纬度：<span id="fightLat">暂无</span></li>
            <li class="list-group-item">无人机经度：<span id="fightLon">暂无</span></li>
            <li class="list-group-item">无人机海拔高度：<span id="fightElv">暂无</span></li>
            <li class="list-group-item">无人机航向：<span id="fightHDG">暂无</span></li>
             <li class="list-group-item">无人机水平倾角：<span id="fightHAgl">暂无</span></li>
            <li class="list-group-item">无人机垂直倾角：<span id="fightGrVAgl">暂无</span></li>
            </ul>
    </div>
</div>
<div id="container"></div>
           
        <!-- UI组件库 1.0 -->
        <script src="//webapi.amap.com/ui/1.0/main.js?v=1.0.11"></script>
        <script type="text/javascript">
           
			var uavdata = ${uav};
			var flyingPath = ${path};

			$("#flyingPathName").html(flyingPath.name);
            $("#uavDeviceId").html(uavdata.deviceid);
            $("#uavName").html(uavdata.name);
            $("#uavDescription").html(uavdata.description);

            //创建地图
            var map = new AMap.Map('container', {
                zoom: 12,
                center: flyingPath.pathdata[0], //中心点坐标
            });
            map.plugin(["AMap.ToolBar","AMap.Scale"], function() {
                var scale = new AMap.Scale({          //生成 比例尺插件
                    visible: true,
                    position:'LB',
                });
                map.addControl(scale);
                scale.show();
                map.addControl(new AMap.ToolBar());    //生成 比例尺滚动条
            });
            if(location.href.indexOf('&guide=1')!==-1){
                map.setStatus({scrollWheel:false})
            }
            AMapUI.loadUI(['control/BasicControl'], function(BasicControl) {

                var layerCtrl1 = new BasicControl.LayerSwitcher({
                    position: 'RB'
                });
                map.addControl(layerCtrl1);
            });

            var polyline = new AMap.Polyline({
                map: map,
                path: flyingPath.pathdata, //设置线覆盖物路径
                strokeColor: '#ff6700', //线颜色
                strokeOpacity: 1, //线透明度
                strokeWeight: 6, //线宽
                strokeStyle: "solid", //线样式
                strokeDasharray: [10, 5] //补充线样式
            });

	        var planeMarker = new AMap.Marker({
	                map: map,
                    position: uavdata.position,
                    icon: new AMap.Icon({
                        size: new AMap.Size(32, 32), //图标大小
                        image: 'i/uav-32.png',
                        offset: new AMap.Pixel(-16, -16) // 相对于基点的偏移位置
                    }),
             });
	        
	        map.add(planeMarker);


        </script>
	</body>
</html>